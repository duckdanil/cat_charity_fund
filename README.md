# API для фонда помощи котикам QRKot
## Спринт 22 — cat_charity_fund

## Технологический стек
- Python 3.9.13
- FastAPI 0.78
- fastapi-users 10.0.4
- pydantic 1.10.7
- SQLAlchemy 1.4.36
- aiosqlite 0.17
- alembic 1.7.7
- uvicorn 0.17.6

## Описание проекта

QRkot — это API сервиса по сбору средств для финансирования благотворительных проектов. В сервисе реализована возможность регистрации пользователей, добавления благотворительных проектов и пожертвований, которые распределяются по открытым проектам.

## Запуск проекта
1. Склонируйте репозиторий:
```
git clone git@github.com:duckdanil/cat_charity_fund.git
```
2. Активируйте venv и установите зависимости:
```
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```
3. Создайте в корневой директории файл .env со следующим наполнением:
```
APP_TITLE=Приложение QRKot.
APP_DESCRIPTION=Спасем котиков вместе!
DATABASE_URL=sqlite+aiosqlite:///./<название базы данных>.db
SECRET=<секретное слово>
FIRST_SUPERUSER_EMAIL=<email администратора>
FIRST_SUPERUSER_PASSWORD=<пароль администратора>
```
4. Примените миграции для создания базы данных SQLite:
```
alembic upgrade head
```
5. Локальный запуск проекта:
```
uvicorn app.main:app
```

## Документация по проекту
С документацией по проекту можно ознакомиться при помощи Swagger по адресу:
`http://127.0.0.1:8000/docs`

После запуска доступны следующие эндпоинты:

1. Регистрация и аутентификация:
- `/auth/register` — регистрация пользователя;
- `/auth/jwt/login` — аутентификация пользователя (получение jwt-токена);
- `/auth/jwt/logout` — выход (сброс jwt-токена).

2. Пользователи:
- `/users/me` — получение и изменение данных аутентифицированного пользователя;
- `/users/{id}` — получение и изменение данных пользователя по id.

3. Благотворительные проекты:
- `/charity_project/` — получение списка проектов и создание нового;
- `/charity_project/{project_id}` — изменение и удаление существующего проекта.

4. Пожертвования:
- `/donation/` — получение списка всех пожертвований и создание пожертвования;
- `/donation/my` — получение списка всех пожертвований аутентифицированного пользователя.

Со схемами запросов и ответов можно ознакомиться в документации или в файле со спецификацией - openapi.json. Для просмотра можно воспользоваться [сайтом](https://redocly.github.io/redoc/).
